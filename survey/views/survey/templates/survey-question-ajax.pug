form(action="/main-action", method="POST", predictionLevel=question.predictionLevel appId=question.id indexQuestion=indexQuestion descLength=question.descLength style="padding: 0 15px") 
  input(type="hidden" name="questions[" + question.id + "][time]" value=1 class="count-time")
  
  button(type="submit" style="display='none';")
  // app name
  h3.title.text-center(style="text-transform: capitalize;")
    | #{indexQuestion + ". " +question.appName}
  div.text-center.mt-1
    | #{question.developer}
  div.text-center
    | #{question.categoryName}
  div.section
    span.font-weight-bold 1. Description: 
    | !{question.description}
  // category
  //- .category.text-center.mt-2
  //-   span.category-label
  //-     | Category
  //-   | : #{question.categoryName}
  .step.wizard-step.current.mt-3(style='')
    //- // Description
    //- .description.mt-3
    //-   span.description-lavel.font-weight-bold
    //-     | I â€“ Description:
    //-   div
    //-     | !{question.description}


    // Collection Personal Data
    section(style="display: none").section
      .section1.mt-3
        // label
        .section1-label.font-weight-bold
          | 2. This app may collect #{question.personalDataTypes.length} personal data type, namely: 
          each personalDataType, index in question.personalDataTypes
              b
                | #{personalDataType.name}
              if(index != question.personalDataTypes.length - 1)
                | #{", "}
              else 
                | #{"."}
        // node data
        .wrap-node
          ul 
            each personalDataType in question.personalDataTypes
              li
                span 
                  b #{personalDataType.name}: 
                  | #{personalDataType.mean}
                div 
                  | * Apis: 
                  each api, index in personalDataType.originalApis
                    | #{api.name}
                    if(index != personalDataType.originalApis.length - 1)
                      | #{", "}
                    else 
                      | #{"."}
              
                

                each api in personalDataType.apis
                  div.mt-2 - #{api.groupName}: 
                    div.pl-3  + #{api.mean}

    section(style="display: none").section
      // Collection Personal Data
      .section2.mt-3
        // label
        .section2-label.font-weight-bold
          | 3. Data Collection Purpose:
        // node data
        .wrap-node
          if(question.collectionData.length > 0)
            ul 
              each category in question.collectionData
                li #{category.name}
                  ul
                    each sub1 in category.children
                      li(style="list-style-type: circle;") #{sub1.name}
                        ul
                          if(sub1.meanings && sub1.meanings.length > 0)
                            // type is all
                            if(sub1.meanings[0].type && sub1.meanings[0].type == "all") 
                              each meaning in sub1.meanings
                                  li.capitalizeFirst(style="list-style-type: square;") #{meaning.groupKeyword}
                            else 
                              li.capitalizeFirst(style="list-style-type: square;") Collected data: 
                                each meaning in sub1.meanings
                                  div - #{meaning.groupKeyword}: #{meaning.type} 
                                    each meaningText, indexMeaning in meaning.meanings
                                      | #{meaningText}
                                      if(indexMeaning != meaning.meanings.length - 1)
                                        | #{", "} 
                                      else 
                                        | #{"."}
          else 
            | &nbsp Do not mention
          //-   ul.more
          //-     each sub1 in category.children
          //-       li(style="list-style-type: circle;") #{sub1.name}: 
          //-         ul.more
          //-           if(sub1.children && sub1.children.length > 0)
          //-             each sub2 in sub1.children
          //-               li(style="list-style-type: square;") #{sub2.name}: 
          //-           if((!sub1.children || sub1.children.length == 0) && sub1.contents.length) 
          //-             each content in sub1.contents
          //-               li.capitalizeFirst(style="list-style-type: square;") #{content.trim()}
          //-         div.see-more-btn() Read more
          //-     if(category.children.length == 0 && category.contents.length > 0) 
          //-       each content in category.contents
          //-         li.capitalizeFirst(style="list-style-type: circle;") #{content.trim()}
          //-   div.see-more-btn() Read more

      // Third party Data
      .section2.mt-3
        // label
        .section2-label.font-weight-bold
          | 4. Third Party:
        // node data
        .wrap-node
          if(question.thirdPartyData.length > 0)
            ul 
              each category in question.thirdPartyData
                if(category.type && category.type == "all") 
                  li #{category.name}: 
                    each sub1, indexSub1 in category.children
                      | #{sub1.name}( 
                        each meaning, indexMeaning in sub1.meanings
                          span.capitalizeFirst(style="list-style-type: square;") #{meaning.groupKeyword}
                          if(indexMeaning != sub1.meanings.length - 1)
                            | #{", "} 
                          else 
                            | #{")"}
                      if(indexSub1 != category.children.length - 1)
                        | #{", "} 
                      else 
                        | #{"."}
                else 
                  li #{category.name}
                    ul
                      each sub1 in category.children
                        li(style="list-style-type: circle;") #{sub1.name}
                          if(sub1.meanings && sub1.meanings.length > 0)
                            ul
                              li.capitalizeFirst(style="list-style-type: square;") Collected data: 
                                each meaning in sub1.meanings
                                  div - #{meaning.groupKeyword}: #{meaning.type} 
                                    each meaningText, indexMeaning in meaning.meanings
                                      | #{meaningText}
                                      if(indexMeaning != meaning.meanings.length - 1)
                                        | #{", "} 
                                      else 
                                        | #{"."}

                          //- // type is all
                          //- if(sub1.meanings[0].type && sub1.meanings[0].type == "all") 
                          //-   each meaning in sub1.meanings
                          //-       span.capitalizeFirst(style="list-style-type: square;") #{meaning.groupKeyword}
                          //- else 
                                
          else      
            | &nbsp Do not mention
          //-   ul.more
          //-     each sub1 in category.children
          //-       li(style="list-style-type: circle;") #{sub1.name}: 
          //-         ul.more
          //-           if(sub1.children && sub1.children.length > 0)
          //-             each sub2 in sub1.children
          //-               li(style="list-style-type: square;") #{sub2.name}: 
          //-           if((!sub1.children || sub1.children.length == 0) && sub1.contents.length) 
          //-             each content in sub1.contents
          //-               li.capitalizeFirst(style="list-style-type: square;") #{content.trim()}
          //-         div.see-more-btn() Read more
          //-     if(category.children.length == 0 && category.contents.length > 0) 
          //-       each content in category.contents
          //-         li.capitalizeFirst(style="list-style-type: circle;") #{content.trim()}      
          //-   div.see-more-btn() Read more

      //- // Retention Data
      //- if(question.retentionData.length)
      //-   .section2.mt-3
      //-     // label
      //-     .section2-label.font-weight-bold
      //-       | Retention:
      //-     // node data
      //-     .wrap-node
      //-       ul 
      //-         each category in question.retentionData
                  
      //-           li #{category.name}: 
      //-             ul.more
      //-               each sub1 in category.children
      //-                 li(style="list-style-type: circle;") #{sub1.isShowKey ? sub1.name : sub1.name + ":"} 

      //-                   if(!sub1.isShowKey && sub1.contents.length) 
      //-                     ul.more
      //-                       each content in sub1.contents
      //-                         li.capitalizeFirst #{content.trim()}
      //-                     div.see-more-btn() Read more
      //-               if(category.children.length == 0 && category.contents.length > 0) 
      //-                 each content in category.contents
      //-                   li.capitalizeFirst(style="list-style-type: circle;") #{content.trim()}
      //-             div.see-more-btn() Read more

  
    // comments
    .comments-data-judgement.mt-3.section(style="display: none")
      .final-judgement
        //- // label
        //- .comments-data-label.font-weight-bold.text-underline
        //-   | II - Final judgment
        // final question
        .question-1.mt-2
          .title.font-weight-bold 5. Do you want to install this app?
          // anwsers
          .anwsers.mt-2
            label.container-radio
              | Yes
              input(type='radio' class="final-question" name="questions[" + question.id + "][final]" value="1" required)
              span.checkmark

            label.container-radio
              | No
              input(type='radio' class="final-question" name="questions[" + question.id + "][final]" value="2")
              span.checkmark

            label.container-radio
              | Maybe
              input(type='radio' class="final-question" name="questions[" + question.id + "][final]" value="3")
              span.checkmark
    div.see-next-btn() Next
